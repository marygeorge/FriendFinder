<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=Survey page, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Survey</title>
</head>
<style type="text/css">
#friend{
    position: fixed;
    top:5%;
    left: 63%;
    border-style: ridge;
    border-width: 2;
}
</style>
<body>
    	<div class="surveyPage">

		<h2>Survey </h2>
		<h4>Name</h4>
		<input type="text" id="name" placeholder="Enter your name"  required >

		<h4>Link to Photo Image (Required)</h4>
		<input type="text" id="photo" placeholder="Link to your photo" required >

        <h4>Questions:</h4>
<table>
    <tr>
        <td>1.<font id="question1"></font></td>
        <td>
	 	<select data-placeholder="" id="q1">
	 		<option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
      	</select>
        </td>
    </tr>
    <tr>
		<td>2.<font id="question2"></font></td>
        <td>
	 	<select data-placeholder="" id="q2">
	 		<option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
      	</select>
        </td>
    </tr>
    <tr>
		<td>3. <font id="question3"></font></td>
        <td>
	 	<select data-placeholder="" id="q3">
	 		<option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
      	</select>
        </td>
    </tr>
    <tr>
        <td>4. <font id="question4"></font></td>
        <td>
	 	<select data-placeholder="" id="q4">
	 		<option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
      	</select>
        </td>
    </tr>
    <tr>    
		<td>5. <font id="question5"></font></td>
        <td>
	 	<select data-placeholder="" id="q5">
	 		<option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
      	</select>
        </td>
    </tr>
    <tr>
		<td>6. <font id="question6"></font></td>
        <td>
	 	<select data-placeholder="" id="q6">
	 		<option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
      	</select>
        </td>
    </tr>
    <tr>
		<td>  7.  <font id="question7"></font></td>
        <td>
	 	<select data-placeholder="" id="q7">
	 		<option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
      	</select>
        </td>
    </tr>
    <tr>
		<td>  8.  <font id="question8"></font></td>
        <td>
	 	<select data-placeholder="" id="q8">
	 		<option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
      	</select>
        </td>
    </tr>
    <tr>
		<td>  9.  <font id="question9"></font></td>
        <td>
	 	<select data-placeholder="" id="q9">
	 		<option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
      	</select>
        </td>
    </tr>
    <tr>
		<td> 10. <font id="question10"></font></td>
        <td>
	 	<select data-placeholder="" id="q10">
	 		<option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
      	</select>
        </td>
    </tr>
    </table>                                                       
		<br>
		<br>

		
		<button type="submit" id="submit"> Submit</button>

<!--Pop up  window-->
    <div id="friend" hidden="hidden">
        <div><h2>Best Friend</h2></div>
        <div> <font id="friendName"></font><br>
                <img id="friendImage" height="25%" width="25%"/>
        </div>
        <div><input type="button" id="close" text="close" value="close" /></div> 
	</div>

<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

<script type="text/javascript">
      $.get("/survey/questions", function(data) {
        //console.log(data);
        for(var i=0; i<data.length; i++)
        {
            var q=i+1;
            $("#question"+q).html(data[i]);
        }
      });

      $("#close").on("click",function(){
          event.preventDefault();
          $("#friend").hide();
      });

      $("#submit").on("click",function(event){
        event.preventDefault();

        var answer=[];
        for(var i=1; i<=10; i++)
        {
           answer.push($("#q"+i).val());
        }
        var users={
            Name:$("#name").val(),
            Photo: $("#photo").val(),
            Answers: answer
        };
        console.log("trying to add "+users);
        $.post("/api/new", users,function(data) {
            if(data)
            { console.log("friend:"+data.Name);
                $("#friendName").text(data.Name);
                $("#friendImage").attr("src",data.Photo);
                $("#friend").show();
            }
            
        });  
      });
   
  </script>
</body>
</html>